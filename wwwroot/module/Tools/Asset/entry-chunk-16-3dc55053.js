(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{299:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var s=n(30);const o={set(e,t){s.a.set(e,t)},get:e=>s.a.get(e,null),init(e,t){e=o.get(e);e&&t(e)},prepare(t,e,n){o.init(e,e=>{t[n]=e})}}},304:function(e,t,n){"use strict";n.d(t,"a",function(){return o});let s=n(305);s.default&&(s=s.default),s.format||(s=s.format);const o={DAY_MS:864e5,MONTH_MS:2592e6,FORMAT_DATE:"YYYY-MM-DD",FORMAT_TIME:"HH:mm:ss",FORMAT_DATETIME:"YYYY-MM-DD HH:mm:ss",FORMAT_TIME_HM:"HH:mm",timestamp:()=>(new Date).getTime(),timestampSecond:()=>parseInt(o.timestamp()/1e3),date:()=>s.format(new Date,o.FORMAT_DATE),time:()=>s.format(new Date,o.FORMAT_TIME),datetime:()=>s.format(new Date,o.FORMAT_DATETIME),stringDatetime:()=>s.format(new Date,"YYYYMMDD_HHmmss"),format:(e,t)=>("string"==typeof e&&(e=new Date(e)),s.format(e,t)),formatDate:e=>o.format(e,o.FORMAT_DATE),formatTimestamp(e,t){let n=new Date;return n.setTime(e),o.format(n,t)},parse:(e,t)=>s.parse(e,t),parseDatetime:e=>s.parse(e,o.FORMAT_DATETIME)}},305:function(e,t,n){"use strict";n.r(t);function s(e,t,n){function s(e,t,n){function s(e){e&&(this.res=e)}var o,i,a=new((s.prototype=e).constructor=s)(n);for(i in t||{})o=t[i],a[i]=o.slice?o.slice():o;return a}var o={res:s(t.res,n.res)};o.formatter=s(t.formatter,n.formatter,o.res),o.parser=s(t.parser,n.parser,o.res),p[e]=o}var d={},p={},o={},f="en",i={MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dd:["Su","Mo","Tu","We","Th","Fr","Sa"],A:["AM","PM"]},a={YYYY:function(e){return("000"+e.getFullYear()).slice(-4)},YY:function(e){return("0"+e.getFullYear()).slice(-2)},Y:function(e){return""+e.getFullYear()},MMMM:function(e){return this.res.MMMM[e.getMonth()]},MMM:function(e){return this.res.MMM[e.getMonth()]},MM:function(e){return("0"+(e.getMonth()+1)).slice(-2)},M:function(e){return""+(e.getMonth()+1)},DD:function(e){return("0"+e.getDate()).slice(-2)},D:function(e){return""+e.getDate()},HH:function(e){return("0"+e.getHours()).slice(-2)},H:function(e){return""+e.getHours()},A:function(e){return this.res.A[11<e.getHours()|0]},hh:function(e){return("0"+(e.getHours()%12||12)).slice(-2)},h:function(e){return""+(e.getHours()%12||12)},mm:function(e){return("0"+e.getMinutes()).slice(-2)},m:function(e){return""+e.getMinutes()},ss:function(e){return("0"+e.getSeconds()).slice(-2)},s:function(e){return""+e.getSeconds()},SSS:function(e){return("00"+e.getMilliseconds()).slice(-3)},SS:function(e){return("0"+(e.getMilliseconds()/10|0)).slice(-2)},S:function(e){return""+(e.getMilliseconds()/100|0)},dddd:function(e){return this.res.dddd[e.getDay()]},ddd:function(e){return this.res.ddd[e.getDay()]},dd:function(e){return this.res.dd[e.getDay()]},Z:function(e){e=e.utc?0:e.getTimezoneOffset()/.6;return(0<e?"-":"+")+("000"+Math.abs(e-e%100*.4)).slice(-4)},post:function(e){return e}},r={YYYY:function(e){return this.exec(/^\d{4}/,e)},Y:function(e){return this.exec(/^\d{1,4}/,e)},MMMM:function(e){e=this.find(this.res.MMMM,e);return e.value++,e},MMM:function(e){e=this.find(this.res.MMM,e);return e.value++,e},MM:function(e){return this.exec(/^\d\d/,e)},M:function(e){return this.exec(/^\d\d?/,e)},DD:function(e){return this.exec(/^\d\d/,e)},D:function(e){return this.exec(/^\d\d?/,e)},HH:function(e){return this.exec(/^\d\d/,e)},H:function(e){return this.exec(/^\d\d?/,e)},A:function(e){return this.find(this.res.A,e)},hh:function(e){return this.exec(/^\d\d/,e)},h:function(e){return this.exec(/^\d\d?/,e)},mm:function(e){return this.exec(/^\d\d/,e)},m:function(e){return this.exec(/^\d\d?/,e)},ss:function(e){return this.exec(/^\d\d/,e)},s:function(e){return this.exec(/^\d\d?/,e)},SSS:function(e){return this.exec(/^\d{1,3}/,e)},SS:function(e){e=this.exec(/^\d\d?/,e);return e.value*=10,e},S:function(e){e=this.exec(/^\d/,e);return e.value*=100,e},Z:function(e){e=this.exec(/^[\+-]\d{2}[0-5]\d/,e);return e.value=-60*(e.value/100|0)-e.value%100,e},h12:function(e,t){return(12===e?0:e)+12*t},exec:function(e,t){t=(e.exec(t)||[""])[0];return{value:0|t,length:t.length}},find:function(e,t){for(var n,s=-1,o=0,i=0,a=e.length;i<a;i++)n=e[i],!t.indexOf(n)&&n.length>o&&(s=i,o=n.length);return{value:s,length:o}},pre:function(e){return e}};d.compile=function(e){for(var t,n=/\[([^\[\]]|\[[^\[\]]*])*]|([A-Za-z])\2+|\.{3}|./g,s=[e];t=n.exec(e);)s[s.length]=t[0];return s},d.format=function(e,t,n){var s="string"==typeof t?d.compile(t):t,o=d.addMinutes(e,n?e.getTimezoneOffset():0),i=p[f].formatter,a="";o.utc=n||!1;for(var r,c=1,l=s.length;c<l;c++)a+=i[r=s[c]]?i.post(i[r](o,s[0])):r.replace(/\[(.*)]/,"$1");return a},d.preparse=function(e,t){var n="string"==typeof t?d.compile(t):t,s={Y:1970,M:1,D:1,H:0,A:0,h:0,m:0,s:0,S:0,Z:0,_index:0,_length:0,_match:0},o=/\[(.*)]/,i=p[f].parser,a=0;e=i.pre(e);for(var r,c,l=1,u=n.length;l<u;l++)if(i[r=n[l]]){if(!(c=i[r](e.slice(a),n[0])).length)break;a+=c.length,s[r.charAt(0)]=c.value,s._match++}else if(r===e.charAt(a)||" "===r)a++;else{if(!o.test(r)||e.slice(a).indexOf(o.exec(r)[1])){if("..."!==r)break;a=e.length;break}a+=r.length-2}return s.H=s.H||i.h12(s.h,s.A),s._index=a,s._length=e.length,s},d.isValid=function(e,t){t="string"==typeof e?d.preparse(e,t):e,e=[31,28+d.isLeapYear(t.Y)|0,31,30,31,30,31,31,30,31,30,31][t.M-1];return!(t._index<1||t._length<1||t._index-t._length||t._match<1||t.Y<1||9999<t.Y||t.M<1||12<t.M||t.D<1||t.D>e||t.H<0||23<t.H||t.m<0||59<t.m||t.s<0||59<t.s||t.S<0||999<t.S||t.Z<-720||840<t.Z)},d.parse=function(e,t,n){t=d.preparse(e,t);return d.isValid(t)?(t.M-=t.Y<100?22801:1,n||t.Z?new Date(Date.UTC(t.Y,t.M,t.D,t.H,t.m+t.Z,t.s,t.S)):new Date(t.Y,t.M,t.D,t.H,t.m,t.s,t.S)):new Date(NaN)},d.transform=function(e,t,n,s){return d.format(d.parse(e,t),n,s)},d.addYears=function(e,t){return d.addMonths(e,12*t)},d.addMonths=function(e,t){e=new Date(e.getTime());return e.setMonth(e.getMonth()+t),e},d.addDays=function(e,t){e=new Date(e.getTime());return e.setDate(e.getDate()+t),e},d.addHours=function(e,t){return d.addMinutes(e,60*t)},d.addMinutes=function(e,t){return d.addSeconds(e,60*t)},d.addSeconds=function(e,t){return d.addMilliseconds(e,1e3*t)},d.addMilliseconds=function(e,t){return new Date(e.getTime()+t)},d.subtract=function(e,t){var n=e.getTime()-t.getTime();return{toMilliseconds:function(){return n},toSeconds:function(){return n/1e3},toMinutes:function(){return n/6e4},toHours:function(){return n/36e5},toDays:function(){return n/864e5}}},d.isLeapYear=function(e){return!((e%4||!(e%100))&&e%400)},d.isSameDay=function(e,t){return e.toDateString()===t.toDateString()},d.locale=function(e,t){return t?s(e,{res:i,formatter:a,parser:r},t):f=("function"==typeof e?e:d.locale[e]||function(){})(d)||f,f},d.extend=function(e){var t,n=e.extender||{};for(t in n)d[t]||(d[t]=n[t]);(e.formatter||e.parser||e.res)&&s(f,p[f],e)},d.plugin=function(e,t){t?o[e]||d.extend(o[e]=t):("function"==typeof e?e:d.plugin[e]||function(){})(d)},d.locale(f,{}),t.default=d},506:function(e,t,n){"use strict";var s=n(9),s=n.n(s)()(function(e){return e[1]});s.push([e.i,".pb-websocket-tool .package-list {\n  overflow: auto;\n  background: #F8F8F8;\n  border: 1px solid #EEE;\n  border-radius: 5px;\n}\n.pb-websocket-tool .package-list .empty {\n  line-height: 100px;\n  color: #999;\n  text-align: center;\n}\n.pb-websocket-tool .package-list .item.item-send {\n  text-align: right;\n}\n.pb-websocket-tool .package-list .item.item-recv {\n  text-align: left;\n}\n.pb-websocket-tool .package-list .item .message {\n  border-radius: 5px;\n  padding: 5px;\n  box-shadow: 0 0 3px #999;\n  margin: 5px;\n  font-size: 12px;\n  display: inline-block;\n}\n.pb-websocket-tool .package-list .item .message.system {\n  text-align: center;\n  box-shadow: none;\n  color: #999;\n  display: block;\n}\n.pb-websocket-tool .package-list .item .message .type {\n  color: #999;\n  display: block;\n  text-align: center;\n}\n.pb-websocket-tool .package-list .item .message .type.send {\n  color: #2B91AF;\n}\n.pb-websocket-tool .package-list .item .message .type.recv {\n  color: #5fba7d;\n}\n.pb-websocket-tool .package-list .item .message pre {\n  text-align: left;\n  color: #666;\n}\n.pb-websocket-tool .package-list .item .message .time {\n  color: #999;\n  font-size: 12px;\n  display: block;\n  text-align: center;\n}\n",""]),t.a=s},733:function(e,t,n){"use strict";n.r(t);var s=function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("div",{staticClass:"pb-websocket-tool"},[s("box",{attrs:{title:"Websocket工具箱"}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:12,xs:24}},[s("div",{staticClass:"ub-form"},[s("div",{staticClass:"line"},[s("div",{staticClass:"label"},[n._v("连接")]),n._v(" "),s("div",{staticClass:"field"},[s("el-select",{staticStyle:{width:"6em",display:"inline-block"},attrs:{placeholder:"请选择",disabled:n.isWsConnected},model:{value:n.websocketProtocol,callback:function(e){n.websocketProtocol=e},expression:"websocketProtocol"}},[s("el-option",{attrs:{label:"ws://",value:"ws://"}}),n._v(" "),s("el-option",{attrs:{label:"wss://",value:"wss://"}})],1),n._v(" "),s("el-input",{staticStyle:{width:"20em",display:"inline-block","margin-right":"10px"},attrs:{placeholder:"请输入地址",disabled:n.isWsConnected},model:{value:n.websocketUrl,callback:function(e){n.websocketUrl=e},expression:"websocketUrl"}})],1)]),n._v(" "),s("div",{staticClass:"line"},[s("div",{staticClass:"label"},[n._v(" ")]),n._v(" "),s("div",{staticClass:"field"},[n.isWsConnected?n._e():s("el-button",{attrs:{type:"primary"},on:{click:n.doConnect}},[n._v("连接")]),n._v(" "),n.isWsConnected?s("el-button",{attrs:{type:"danger"},on:{click:n.doDisconnect}},[n._v("断开")]):n._e()],1)]),n._v(" "),s("div",{staticClass:"line"},[s("div",{staticClass:"label"},[n._v("发送数据")]),n._v(" "),s("div",{staticClass:"field"},[n._l(n.websocketSendPayloads,function(e,t){return s("div",{staticStyle:{"padding-right":"1rem",position:"relative",overflow:"hidden"}},[s("a",{staticClass:"ub-text-danger",staticStyle:{position:"absolute",right:"0rem",top:"0rem","line-height":"1rem"},attrs:{href:"javascript:;"},on:{click:function(e){n.websocketSendPayloads.splice(t,1),n.websocketSendPayloadsAutoClean.splice(t,1)}}},[s("i",{staticClass:"iconfont icon-trash"})]),n._v(" "),s("div",[s("el-input",{staticStyle:{"margin-top":"0"},attrs:{type:"textarea",disabled:!n.isWsConnected,autosize:{minRows:2,maxRows:100}},model:{value:n.websocketSendPayloads[t],callback:function(e){n.$set(n.websocketSendPayloads,t,e)},expression:"websocketSendPayloads[itemIndex]"}})],1),n._v(" "),s("div",[s("div",{staticStyle:{float:"right"}},[s("el-checkbox",{staticClass:"pb-input-code",attrs:{border:""},model:{value:n.websocketSendPayloadsAutoClean[t],callback:function(e){n.$set(n.websocketSendPayloadsAutoClean,t,e)},expression:"websocketSendPayloadsAutoClean[itemIndex]"}},[n._v("\n                                            发后清空\n                                        ")])],1),n._v(" "),n.isWsConnected?s("a",{attrs:{href:"javascript:;",type:"primary"},on:{click:function(e){return n.doSend(t)}}},[n._v("\n                                        发送\n                                    ")]):n._e()])])}),n._v(" "),s("a",{staticClass:"ub-text-muted",attrs:{href:"javascript:;"},on:{click:function(e){n.websocketSendPayloads.push(""),n.websocketSendPayloadsAutoClean.push(!1)}}},[s("i",{staticClass:"iconfont icon-plus"}),n._v(" 增加一组")])],2)])])]),n._v(" "),s("el-col",{attrs:{span:12,xs:24}},[s("div",{staticClass:"ub-panel"},[s("div",{staticClass:"head"},[s("div",{staticClass:"title"},[n._v("\n                            通讯数据\n                        ")])]),n._v(" "),s("div",{staticClass:"body"},[s("div",{ref:"packageList",staticClass:"package-list",style:{height:n.packagesHeight+"px"}},[s("div",[0===n.packages.length?s("div",{staticClass:"empty"},[n._v("暂无数据")]):n._e(),n._v(" "),n._l(n.packages,function(e){return s("div",{staticClass:"item",class:"send"===e.type?"item-send":"item-recv"},["send"===e.type||"recv"===e.type?s("div",{staticClass:"message"},["send"===e.type?s("div",{staticClass:"type send"},[n._v("发送")]):n._e(),n._v(" "),"recv"===e.type?s("div",{staticClass:"type recv"},[n._v("接收")]):n._e(),n._v(" "),s("div",{staticClass:"time ub-text-muted"},[s("i",{staticClass:"iconfont icon-time"}),n._v(" "+n._s(e.time))]),n._v(" "),s("pre",{staticStyle:{"font-size":"0.5rem","line-height":"0.6rem"}},[n._v(n._s(n.formatMessage(e.message)))])]):n._e(),n._v(" "),"system"===e.type?s("div",{staticClass:"message system"},[n._v("\n                                        "+n._s(e.time)+"\n                                        "+n._s(e.message)+"\n                                    ")]):n._e()])})],2)])])])])],1)],1),n._v(" "),s("box",{attrs:{title:"关于Websocket工具箱"}},[s("p",[n._v("\n            Websocket是一种用于H5浏览器的实时通讯协议，可以做到数据的实时推送，可适用于广泛的工作环境，例如客服系统、物联网数据传输系统，该测试工具可用于websocket开发初期的测试工作。\n        ")])])],1)};s._withStripped=!0;var o=n(304),i=n(17),a=n.n(i);const r={setHeightResponsively(t,n,s,o){s=s||200;const e=()=>{let e;try{e=o()}catch(e){console.log("error",e)}e=e||s,t[n]=Math.max(e,s)};setTimeout(()=>e(),100),a()(window).on("resize",e)},windowHeight:()=>a()(window).height(),fireResize(){a()(window).trigger("resize")},watchHeightResponsively(e,t){const n=()=>{e(r.windowHeight())};setTimeout(()=>n(),0),a()(window).on("resize",n)}};var c=n(299);const l=n(17);var u={metaInfo:{title:"Websocket工具箱"},data:()=>({websocketConn:null,websocketProtocol:"ws://",websocketUrl:"localhost",websocketSendPayloads:[],websocketSendPayloadsAutoClean:[],packages:[],packagesHeight:200,packagesAutoScrollTimer:null}),computed:{isWsConnected(){return!!this.websocketConn}},mounted(){r.setHeightResponsively(this,"packagesHeight",200,()=>l(window).height()-220),c.a.init("WebsocketTool.websocketUrl",e=>{this.websocketUrl=e}),c.a.init("WebsocketTool.websocketSendPayloads",e=>{this.websocketSendPayloads=e}),c.a.init("WebsocketTool.websocketSendPayloadsAutoClean",e=>{this.websocketSendPayloadsAutoClean=e})},watch:{packages(){this.doPackageScrollToBottom()},websocketUrl(e,t){c.a.set("WebsocketTool.websocketUrl",e)},websocketSendPayloads(e,t){c.a.set("WebsocketTool.websocketSendPayloads",e)},websocketSendPayloadsAutoClean(e,t){c.a.set("WebsocketTool.websocketSendPayloadsAutoClean",e)}},methods:{formatMessage(e){try{var t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(e){}return e},doPackageScrollToBottom(){const e=l(this.$refs.packageList);this.packagesAutoScrollTimer&&clearTimeout(this.packagesAutoScrollTimer),this.packagesAutoScrollTimer=setTimeout(()=>{e.stop().animate({scrollTop:e.prop("scrollHeight")},400),this.packagesAutoScrollTimer=null},100)},doConnect(){this.websocketConn||(this.websocketConn=new WebSocket(`${this.websocketProtocol}${this.websocketUrl}`),this.websocketConn.onopen=e=>{console.log("WebsocketTool.onopen",e),this.packages.push({type:"system",time:o.a.datetime(),message:"连接成功"})},this.websocketConn.onmessage=e=>{console.log("WebsocketTool.onmessage",e),this.packages.push({type:"recv",time:o.a.datetime(),message:e.data})},this.websocketConn.onerror=e=>(console.log("WebsocketTool.onerror",e),this.packages.push({type:"system",time:o.a.datetime(),message:"出现错误"}),e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1),this.websocketConn.onclose=e=>{console.log("WebsocketTool.onclose",e),this.packages.push({type:"system",time:o.a.datetime(),message:"连接关闭"}),this.websocketConn=null})},doDisconnect(){this.websocketConn&&this.websocketConn.close()},doSend(e){this.websocketSendPayloads[e]?(this.websocketConn.send(this.websocketSendPayloads[e]),this.packages.push({type:"send",time:o.a.datetime(),message:this.websocketSendPayloads[e]}),this.websocketSendPayloadsAutoClean[e]&&(this.websocketSendPayloads[e]="")):this.$dialog.tipError("请输入发送数据")}}},d=n(8),i=n.n(d),d=n(506),n=(i()(d.a,{insert:"head",singleton:!1}),d.a.locals,n(5)),s=Object(n.a)(u,s,[],!1,null,null,null);s.options.__file="src/pages/modules/WebsocketTool.vue",t.default=s.exports}}]);