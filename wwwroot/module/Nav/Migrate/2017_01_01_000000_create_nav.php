<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ use Illuminate\Database\Schema\Blueprint; use Illuminate\Database\Migrations\Migration; use ModStart\Core\Dao\ModelManageUtil; class CreateNav extends Migration { public function up() { if (ModelManageUtil::hasTable('nav')) { goto q8Fsc; do0MG: if (!in_array('link', $nGB_4)) { if (in_array('url', $nGB_4)) { Schema::table('nav', function (Blueprint $qNtCk) { $qNtCk->renameColumn('url', 'link'); }); } else { Schema::table('nav', function (Blueprint $qNtCk) { $qNtCk->string('link', 200)->nullable()->comment('链接'); }); } } goto NG3Va; q8Fsc: $nGB_4 = ModelManageUtil::listTableColumns('nav'); goto fTcoP; fTcoP: if (!in_array('position', $nGB_4)) { if (in_array('type', $nGB_4)) { Schema::table('nav', function (Blueprint $qNtCk) { $qNtCk->renameColumn('type', 'position'); }); } else { Schema::table('nav', function (Blueprint $qNtCk) { $qNtCk->string('position', 50)->nullable()->comment('位置'); }); } } goto QW9zm; QW9zm: if (!in_array('name', $nGB_4)) { if (in_array('title', $nGB_4)) { Schema::table('nav', function (Blueprint $qNtCk) { $qNtCk->renameColumn('title', 'name'); }); } else { Schema::table('nav', function (Blueprint $qNtCk) { $qNtCk->string('name', 100)->nullable()->comment('图片'); }); } } goto do0MG; NG3Va: } else { Schema::create('nav', function (Blueprint $qNtCk) { $qNtCk->increments('id'); $qNtCk->timestamps(); $qNtCk->string('position', 50)->nullable()->comment('位置'); $qNtCk->integer('sort')->nullable()->comment('顺序'); $qNtCk->string('name', 100)->nullable()->comment('图片'); $qNtCk->string('link', 200)->nullable()->comment('链接'); }); } } public function down() { } }