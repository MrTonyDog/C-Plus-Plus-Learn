<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Core; use Illuminate\Events\Dispatcher; use Illuminate\Support\ServiceProvider; use ModStart\Admin\Config\AdminMenu; use ModStart\Admin\Widget\DashboardItemA; use ModStart\Core\Dao\ModelUtil; use ModStart\Core\Util\ColorUtil; use ModStart\Layout\Row; use ModStart\Module\ModuleManager; use Module\Member\Config\MemberHomeIcon; use Module\Member\Config\MemberMenu; use Module\Member\Listener\MemberVipPayListener; use Module\Member\Provider\VerifySmsTemplateProvider; use Module\Vendor\Admin\Config\AdminWidgetDashboard; use Module\Vendor\Admin\Config\AdminWidgetLink; use Module\Vendor\Provider\SmsTemplate\SmsTemplateProvider; class ModuleServiceProvider extends ServiceProvider { public function boot(Dispatcher $PNkBK) { goto hQ8e8; hQ8e8: MemberMenu::register(function () { return array(array('icon' => 'details', 'title' => '资产', 'sort' => 900, 'children' => array(ModuleManager::getModuleConfigBoolean('Member', 'moneyEnable') && modstart_config('Member_MoneyEnable', false) ? array('title' => '我的钱包', 'url' => modstart_web_url('member_money')) : null, ModuleManager::getModuleConfigBoolean('Member', 'creditEnable') && modstart_config('Member_CreditEnable', false) ? array('title' => '我的积分', 'url' => modstart_web_url('member_credit')) : null)), array('icon' => 'user', 'title' => '我的', 'sort' => 1000, 'children' => array(ModuleManager::getModuleConfigBoolean('Member', 'addressEnable') ? array('title' => '我的地址', 'url' => modstart_web_url('member_address')) : null, array('title' => '账号安全', 'url' => modstart_web_url('member_profile/security')), array('title' => '账号资料', 'url' => modstart_web_url('member_profile/profile')), array('title' => '账号绑定', 'url' => modstart_web_url('member_profile/bind')), array('title' => '退出登录', 'url' => modstart_web_url('logout'))))); }); goto dyW3W; BUayi: AdminWidgetLink::register(function () { return AdminWidgetLink::build('会员', array(array('注册', modstart_web_url('register')), array('登录', modstart_web_url('login')), array('找回密码', modstart_web_url('retrieve')), ModuleManager::getModuleConfigBoolean('Member', 'moneyEnable') ? array('用户钱包', modstart_web_url('member_money')) : null, ModuleManager::getModuleConfigBoolean('Member', 'creditEnable') ? array('用户积分', modstart_web_url('login')) : null)); }); goto YM27r; xnspv: AdminMenu::register(function () { return array(array('title' => '用户中心', 'icon' => 'users', 'sort' => 100, 'children' => array(array('title' => '用户统计', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberDashboardController@index'), array('title' => '用户管理', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberController@index'), ModuleManager::getModuleConfigBoolean('Member', 'vipEnable') ? array('title' => '会员VIP订单', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberVipOrderController@index') : null, ModuleManager::getModuleConfigBoolean('Member', 'moneyEnable') ? array('title' => '钱包提现申请', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberMoneyCashController@index') : null)), array('title' => '功能设置', 'icon' => 'tools', 'sort' => 300, 'children' => array(array('title' => '用户设置', 'children' => array(array('title' => '功能设置', 'url' => '\\Module\\Member\\Admin\\Controller\\ConfigController@setting'), array('title' => '用户协议', 'url' => '\\Module\\Member\\Admin\\Controller\\ConfigController@agreement'), ModuleManager::getModuleConfigBoolean('Member', 'moneyEnable') ? array('title' => '钱包设置', 'url' => '\\Module\\Member\\Admin\\Controller\\ConfigController@money') : null, ModuleManager::getModuleConfigBoolean('Member', 'creditEnable') ? array('title' => '积分设置', 'url' => '\\Module\\Member\\Admin\\Controller\\ConfigController@credit') : null, ModuleManager::getModuleConfigBoolean('Member', 'vipEnable') ? array('title' => 'VIP设置', 'url' => '\\Module\\Member\\Admin\\Controller\\ConfigController@vip') : null, ModuleManager::getModuleConfigBoolean('Member', 'vipEnable') ? array('title' => 'VIP等级', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberVipSetController@index') : null, ModuleManager::getModuleConfigBoolean('Member', 'groupEnable') ? array('title' => '用户分组', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberGroupController@index') : null))))); }); goto BI81T; ztjth: AdminWidgetDashboard::registerIcon(function (Row $sfPWW) { $sfPWW->column(3, DashboardItemA::makeIconNumberTitle('iconfont icon-user', ModelUtil::count('member_user'), '用户数', modstart_admin_url('member'), ColorUtil::randomColor())); }); goto BUayi; JzFBz: MemberHomeIcon::register(function () { return array(array('title' => '我的', 'sort' => 1000, 'children' => array(array('icon' => 'iconfont icon-card', 'title' => '我的资料', 'url' => modstart_web_url('member_profile')), array('icon' => 'iconfont icon-lock', 'title' => '修改密码', 'url' => modstart_web_url('member_profile/password')), array('icon' => 'iconfont icon-user', 'title' => '修改头像', 'url' => modstart_web_url('member_profile/avatar'))))); }); goto ztjth; dyW3W: SmsTemplateProvider::register(VerifySmsTemplateProvider::class); goto JzFBz; YM27r: $PNkBK->subscribe(MemberVipPayListener::class); goto xnspv; BI81T: } public function register() { } }