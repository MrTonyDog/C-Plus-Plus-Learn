<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Config; use Illuminate\Support\Str; class MemberHomeIcon { private static $menu = array(); public static function register($pDrOS) { self::$menu[] = $pDrOS; } public static function get() { goto MMVX5; jGd11: foreach (self::$menu as $KdsT8) { if ($KdsT8 instanceof \Closure) { $KdsT8 = call_user_func($KdsT8); } $pDrOS = array_merge($pDrOS, $KdsT8); } goto nnni_; ZJiAl: return $pDrOS; goto Vzt6e; nnni_: $pDrOS = self::mergeMenu($pDrOS); goto ZJiAl; MMVX5: $pDrOS = array(); goto jGd11; Vzt6e: } private static function sort() { static $PcBmw = 1000; return $PcBmw++; } private static function mergeMenu($pDrOS, $zBMcE = '', $oswCg = 1, $P2EU9 = null) { goto emZjZ; nMr7X: if ($oswCg == 1) { uasort($rqY0_, function ($cGnks, $rnjjQ) { return $cGnks['sort'] - $rnjjQ['sort']; }); return self::mergeMenuTree($rqY0_); } goto LuLV_; LuLV_: return $rqY0_; goto f5_i7; zswRP: $rqY0_ = array(); goto fxdDq; fxdDq: foreach ($pDrOS as $KdsT8) { goto zJpyl; MsfZ3: unset($rqY0_[$Zc0iK]['children']); goto A_AXK; zJpyl: if (empty($KdsT8)) { continue; } goto RLCTe; A_AXK: if (!empty($KdsT8['children'])) { $rqY0_ = array_merge($rqY0_, self::mergeMenu($KdsT8['children'], $Zc0iK . '^^', $oswCg + 1, $P2EU9)); } goto bsr1A; Cietv: if (!isset($rqY0_[$Zc0iK])) { $rqY0_[$Zc0iK] = $KdsT8; } goto MsfZ3; ZstJE: if (!isset($KdsT8['sort'])) { $KdsT8['sort'] = self::sort(); } goto hhd3U; RLCTe: if ($P2EU9) { if (!call_user_func($P2EU9, $KdsT8)) { continue; } } goto ZstJE; hhd3U: if (1 == $oswCg) { $Zc0iK = $zBMcE . $KdsT8['title'] . '^' . $KdsT8['sort']; } else { $Zc0iK = $zBMcE . $KdsT8['title']; } goto Cietv; bsr1A: } goto nMr7X; emZjZ: if (empty($pDrOS)) { return array(); } goto zswRP; f5_i7: } private static function mergeMenuTree($qizvO, $zBMcE = '') { goto eBqYE; eBqYE: $ayd9d = array(); goto TRlAG; TRlAG: foreach ($qizvO as $Zc0iK => $aEiYS) { goto GfcgX; EXkxk: if (empty($KdsT8['children']) && empty($KdsT8['url'])) { continue; } goto Ir40a; RZ4C5: if ($zBMcE) { if (!Str::startsWith($Zc0iK, $zBMcE)) { continue; } if (count(explode('^^', $zBMcE)) !== count(explode('^^', $Zc0iK))) { continue; } } else { if (1 != count($UuN2f)) { continue; } } goto IdIeE; Ir40a: $ayd9d[] = $KdsT8; goto DY8er; sPVNT: $UuN2f = explode('^^', $Zc0iK); goto RZ4C5; Joaip: $KdsT8['children'] = self::mergeMenuTree($qizvO, $Zc0iK . '^^'); goto xhOAC; xhOAC: if (empty($KdsT8['children'])) { unset($KdsT8['children']); } goto EXkxk; GfcgX: if ($Zc0iK === $zBMcE) { continue; } goto sPVNT; IdIeE: $KdsT8 = $aEiYS; goto Joaip; DY8er: } goto Wt65J; Wt65J: return $ayd9d; goto Gq52N; Gq52N: } }