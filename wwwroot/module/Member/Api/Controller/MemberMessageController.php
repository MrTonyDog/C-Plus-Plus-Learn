<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Api\Controller; use ModStart\Core\Input\InputPackage; use ModStart\Core\Input\Response; use ModStart\Core\Util\CRUDUtil; use ModStart\Module\ModuleBaseController; use Module\Member\Auth\MemberUser; use Module\Member\Support\MemberLoginCheck; use Module\Member\Util\MemberMessageUtil; class MemberMessageController extends ModuleBaseController implements MemberLoginCheck { public function paginate() { goto CheNv; MSzgi: return Response::generateSuccessPaginateData($ZcuyS, $iy20Z, $wN_YM['records'], $wN_YM['total']); goto oyVaN; Tz7SB: if (!empty($E5t3R['status'])) { $HxhmW['search'][] = array('status' => array('equal' => intval($E5t3R['status']))); } goto dhaSn; CheNv: $HoLMG = InputPackage::buildFromInput(); goto vffM4; Pa29y: $E5t3R = $HoLMG->getJson('search'); goto Tz7SB; dhaSn: $wN_YM = MemberMessageUtil::paginate(MemberUser::id(), $ZcuyS, $iy20Z, $HxhmW); goto MSzgi; Dg2y3: $iy20Z = 10; goto bQ7fj; bQ7fj: $HxhmW = array('search' => array(), 'order' => array('id', 'desc')); goto Pa29y; vffM4: $ZcuyS = $HoLMG->getInteger('page'); goto Dg2y3; oyVaN: } public function delete() { MemberMessageUtil::delete(MemberUser::id(), CRUDUtil::ids()); return Response::generateSuccess(); } public function read() { MemberMessageUtil::updateRead(MemberUser::id(), CRUDUtil::ids()); return Response::generateSuccess(); } public function readAll() { MemberMessageUtil::updateReadAll(MemberUser::id()); return Response::generateSuccess(); } }